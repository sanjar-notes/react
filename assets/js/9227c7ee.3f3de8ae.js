"use strict";(self.webpackChunkreactjs_notes_docu=self.webpackChunkreactjs_notes_docu||[]).push([[3900],{9613:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),c=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},l=function(e){var t=c(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(u,".").concat(h)]||d[h]||p[h]||i;return n?a.createElement(m,o(o({ref:t},l),{},{components:n})):a.createElement(m,o({ref:t},l))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7817:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(1163),r=(n(9496),n(9613));const i={},o="117. useReducer hook",s={unversionedId:"home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/useReducer_hook",id:"home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/useReducer_hook",title:"117. useReducer hook",description:"Created Tuesday 12 March 2022",source:"@site/docs/home/4_resource_itineraries/2_React_the_complete_guide/10_side-effects,_reducers,_contextAPI/117_useReducer_hook.md",sourceDirName:"home/4_resource_itineraries/2_React_the_complete_guide/10_side-effects,_reducers,_contextAPI",slug:"/home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/useReducer_hook",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/useReducer_hook",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/home/4_resource_itineraries/2_React_the_complete_guide/10_side-effects,_reducers,_contextAPI/117_useReducer_hook.md",tags:[],version:"current",sidebarPosition:117,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"114. useEffect cleanup function",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/useEffect_cleanup_function"},next:{title:"121. Introducing React Context (Context_API)",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/side-effects,_reducers,_contextAPI/Introducing_React_Context_(Context_API)"}},u={},c=[{value:"Why (when to use it instead of <code>useState</code>)",id:"why-when-to-use-it-instead-of-usestate",level:3},{value:"How",id:"how",level:3},{value:"Computed initialState",id:"computed-initialstate",level:4},{value:"What",id:"what",level:3}],l={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"117-usereducer-hook"},"117. useReducer hook"),(0,r.kt)("p",null,"Created Tuesday 12 March 2022"),(0,r.kt)("ul",{className:"contains-task-list"},(0,r.kt)("li",{parentName:"ul",className:"task-list-item"},(0,r.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","in vault\n")),(0,r.kt)("h3",{id:"why-when-to-use-it-instead-of-usestate"},"Why (when to use it instead of ",(0,r.kt)("inlineCode",{parentName:"h3"},"useState"),")"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useReducer")," is a syntax sugar for ",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," . It is preferred over ",(0,r.kt)("inlineCode",{parentName:"p"},"useState")," if the state:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Is complex (has many parts)."),(0,r.kt)("li",{parentName:"ul"},"The state and data inside it are highly related (OK, but Why?)."),(0,r.kt)("li",{parentName:"ul"},"Types of updates are more, as using ",(0,r.kt)("inlineCode",{parentName:"li"},"useState")," would result in a lot of functions, which makes the JSX or JS code bulky.")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useReducer"),' is an "additional" hook, and ',(0,r.kt)("inlineCode",{parentName:"p"},"useState")," is the primary hook."),(0,r.kt)("h3",{id:"how"},"How"),(0,r.kt)("p",null,"The 4 things needed for ",(0,r.kt)("inlineCode",{parentName:"p"},"useReducer")," are:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"State - to be read"),(0,r.kt)("li",{parentName:"ol"},"Dispatch function - to be called with case argument and payload(state related argument). This function is provided by the hook."),(0,r.kt)("li",{parentName:"ol"},"Reducer - this sets the new state based on the case argument and state related argument. This function is usually a switch case."),(0,r.kt)("li",{parentName:"ol"},"Initial value of the state.")),(0,r.kt)("p",null,"The basic syntax for ",(0,r.kt)("inlineCode",{parentName:"p"},"useReducer")," is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { useReducer } from 'react';\n\nfunction reducerFunc(state, action) {\n    // latest state,\n    // action is the variable passed to dispath\n    switch(action.type)\n    {\n        case 'CASE_VAL':\n            return {...state, name: action.payload}; // becomes state\n        ...\n        default:\n            throw new Error(`Unknown reducer type: ${action.type}`);\n    }\n}\n\nfunction MyComponent () {\n\n    const [stateVar, dispatchFunc] = useReducer(reducerFunc, intialState);\n    \n    return (<>\n            ...\n            {state.name}\n            ...\n            <button onClick={ ()=>dispatchFunc({type: 'CASE_VAL', payload: 'arg'}) }>Name<button>\n            ...\n            </>);\n}\n")),(0,r.kt)("p",null,"About the syntax:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"It's a convention to name the case argument 'type', and the state related argument 'payload'. It's not a rule though."),(0,r.kt)("li",{parentName:"ol"},"The reducer function is kept outside the component. This is not a very strict rule, but is the recommended way. Why: it doesn't re-prepare the reducer function every time that the component is run, which is good memory+time wise.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Also, as in ",(0,r.kt)("inlineCode",{parentName:"li"},"useState"),", dispatch causes a re-render of the component, with the new state."),(0,r.kt)("li",{parentName:"ul"},"Having a ",(0,r.kt)("inlineCode",{parentName:"li"},"default")," case (in the reducer function) that returns an error is a good practice, it helps avoid errors.")),(0,r.kt)("h4",{id:"computed-initialstate"},"Computed initialState"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"useReducer"),", and hence ",(0,r.kt)("inlineCode",{parentName:"li"},"initialState")," is ignored after the first render, the whole statement is."),(0,r.kt)("li",{parentName:"ul"},"There is an alternative syntax, that's especially useful if the initial value is the result of an expensive computation, and so should be run once during the first render. Only the ",(0,r.kt)("inlineCode",{parentName:"li"},"useReducer")," statement changes.",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const [stateVar, dispatchFunc] = useReducer(reducerFunc, intialArg, initFunc);\n        // the initial value is now initFunc(initialArg).\n")))),(0,r.kt)("h3",{id:"what"},"What"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/exemplar-codes/react-hello-world/blob/5a83a92598ad832fb882a43ede103946b9815458/src/Apps/UseReducerDemo/UseReducerDemo.jsx"},"Here")," is a simple example."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useReducer")," is like having a signal + payload (action) - an API(logic - reducer) and a backend (state). It's a good coding pattern. Makes the code sweet.\nSo ",(0,r.kt)("inlineCode",{parentName:"li"},"useReducer")," is a syntax sugar of  ",(0,r.kt)("inlineCode",{parentName:"li"},"useState"),", functionally.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://devtrium.com/posts/how-to-use-react-usereducer-hook#what-is-react-usereducer-hook-and-how-to-use-it"},"Here"),"'s a good article for useReducer I took info from."))}p.isMDXComponent=!0}}]);