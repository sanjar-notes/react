"use strict";(self.webpackChunkreactjs_notes_docu=self.webpackChunkreactjs_notes_docu||[]).push([[9294],{9613:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>_});var a=o(9496);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=c(o),d=r,_=m["".concat(l,".").concat(d)]||m[d]||p[d]||n;return o?a.createElement(_,i(i({ref:t},u),{},{components:o})):a.createElement(_,i({ref:t},u))}));function _(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<n;c++)i[c]=o[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}d.displayName="MDXCreateElement"},2687:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var a=o(1163),r=(o(9496),o(9613));const n={},i="191. A more realistic example of custom hook",s={unversionedId:"home/resource_itineraries/React_the_complete_guide/Building_Custom_React_Hooks/A_more_realistic_example_of_custom_hook",id:"home/resource_itineraries/React_the_complete_guide/Building_Custom_React_Hooks/A_more_realistic_example_of_custom_hook",title:"191. A more realistic example of custom hook",description:"Created Tuesday 24 July 2022",source:"@site/docs/home/4_resource_itineraries/2_React_the_complete_guide/15_Building_Custom_React_Hooks/191_A_more_realistic_example_of_custom_hook.md",sourceDirName:"home/4_resource_itineraries/2_React_the_complete_guide/15_Building_Custom_React_Hooks",slug:"/home/resource_itineraries/React_the_complete_guide/Building_Custom_React_Hooks/A_more_realistic_example_of_custom_hook",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/Building_Custom_React_Hooks/A_more_realistic_example_of_custom_hook",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/home/4_resource_itineraries/2_React_the_complete_guide/15_Building_Custom_React_Hooks/191_A_more_realistic_example_of_custom_hook.md",tags:[],version:"current",sidebarPosition:191,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"188. A doubt about custom hooks",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/Building_Custom_React_Hooks/z_A_doubt_about_custom_hooks"},next:{title:"197. Module Introduction",permalink:"/docs/home/resource_itineraries/React_the_complete_guide/Forms_and_user_input_detailed/Module_introduction"}},l={},c=[],u={toc:c},m="wrapper";function p(e){let{components:t,...o}=e;return(0,r.kt)(m,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"191-a-more-realistic-example-of-custom-hook"},"191. A more realistic example of custom hook"),(0,r.kt)("p",null,"Created Tuesday 24 July 2022"),(0,r.kt)("p",null,"We'll look at some complications and their solutions, that can arise in a real use case.\nConsider ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/exemplar-codes/react-custom-hooks-realistic-example/blob/cbfbbc15df2b8069460d807868fd37e2f187df7f/src/App.jsx"},"App.jsx")," and ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/exemplar-codes/react-custom-hooks-realistic-example/blob/cbfbbc15df2b8069460d807868fd37e2f187df7f/src/components/NewTask/NewTask.jsx"},"NewTask.jsx"),". Observe that:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Both make HTTP requests, method varies of course."),(0,r.kt)("li",{parentName:"ol"},"Both do some work on the JSON data response."),(0,r.kt)("li",{parentName:"ol"},"Both handle ",(0,r.kt)("inlineCode",{parentName:"li"},"isLoading")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"error")," states."),(0,r.kt)("li",{parentName:"ol"},"Both create and call a function encapsulating ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch")," either as a callback or in ",(0,r.kt)("inlineCode",{parentName:"li"},"useEffect"),", so we'll do the same, i.e. return a callback.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We can extract this functionality out to a custom hook."),(0,r.kt)("li",{parentName:"ul"},"There are two possible ways to do this - pass the ",(0,r.kt)("inlineCode",{parentName:"li"},"onSuccess")," functionality, ",(0,r.kt)("inlineCode",{parentName:"li"},"url"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"method")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"payloadBody")," to the hook, or let them be parameters of the callback being returned by the hook."),(0,r.kt)("li",{parentName:"ul"},"We'll choose the latter, because we need to work with ",(0,r.kt)("inlineCode",{parentName:"li"},"taskText")," as input in `NewTask.jsx."),(0,r.kt)("li",{parentName:"ul"},"We should return the callback by wrapping it inside ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback"),", and as it doesn't take any external variables (parameters are internal variables), we don't need to provide a dependencies list.\nHad we chosen to provide the arguments to be passed to the hook, we'd have to use ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback")," and also mandate that the ",(0,r.kt)("inlineCode",{parentName:"li"},"onSuccess")," being returned be wrapped inside ",(0,r.kt)("inlineCode",{parentName:"li"},"useCallback")," as well, which would hurt the hook's usability.")),(0,r.kt)("p",null,"See final result, ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/exemplar-codes/react-custom-hooks-realistic-example/commit/ffa88863002e66bc86a9222c35c2ad8bd65a1812"},"here"),"."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"Custom hooks behave very fluidly and don't require any special syntax. But they can sometimes become convoluted if the custom hooks behavior needs to be heavily varied (as that will increase parameters in the hook and therefore complexity)."))}p.isMDXComponent=!0}}]);