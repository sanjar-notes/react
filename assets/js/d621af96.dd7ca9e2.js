"use strict";(self.webpackChunkreactjs_notes_docu=self.webpackChunkreactjs_notes_docu||[]).push([[4382],{9613:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var a=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},f="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),f=s(n),p=o,h=f["".concat(c,".").concat(p)]||f[p]||u[p]||r;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[f]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5818:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(1163),o=(n(9496),n(9613));const r={},i="110. useEffect hook",l={unversionedId:"vault/Lifecycle_and_hooks/useEffect_hook",id:"vault/Lifecycle_and_hooks/useEffect_hook",title:"110. useEffect hook",description:"Created Tuesday 08 March 2022",source:"@site/docs/vault/5_Lifecycle_and_hooks/3_useEffect_hook.md",sourceDirName:"vault/5_Lifecycle_and_hooks",slug:"/vault/Lifecycle_and_hooks/useEffect_hook",permalink:"/reactjs-notes/docs/vault/Lifecycle_and_hooks/useEffect_hook",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vault/5_Lifecycle_and_hooks/3_useEffect_hook.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"1. React lifecycle hooks",permalink:"/reactjs-notes/docs/vault/Lifecycle_and_hooks/React_lifecycle_hooks_TO_BE_DELETED"},next:{title:"1.1. React lifecycle methods",permalink:"/reactjs-notes/docs/vault/Lifecycle_and_hooks/1_1_React_lifecycle_methods"}},c={},s=[{value:"What is an effect, aka &quot;side effect&quot;?",id:"what-is-an-effect-aka-side-effect",level:4},{value:"Why",id:"why",level:3},{value:"How",id:"how",level:3},{value:"Note on dependency array",id:"note-on-dependency-array",level:6},{value:"What",id:"what",level:3},{value:"When to use <code>useEffect</code>?",id:"when-to-use-useeffect",level:6}],d={toc:s},f="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(f,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"110-useeffect-hook"},"110. useEffect hook"),(0,o.kt)("p",null,"Created Tuesday 08 March 2022"),(0,o.kt)("h4",{id:"what-is-an-effect-aka-side-effect"},'What is an effect, aka "side effect"?'),(0,o.kt)("p",null,"The main job of React is to:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Render UI"),(0,o.kt)("li",{parentName:"ol"},"React to user input.")),(0,o.kt)("p",null,'Tasks other than these 2 are "side effects". Example - http requests, computation, timers, using ',(0,o.kt)("inlineCode",{parentName:"p"},"localStorage"),", listening to user input etc. Note that some normal ops can also be considered side-effects - like listening to user input for validation."),(0,o.kt)("h3",{id:"why"},"Why"),(0,o.kt)("p",null,'Side effects cannot be coded "as is" into the component function, because:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"They'll be executed each time the component is rendered, i.e. function is executed. This may be very expensive, or not needed."),(0,o.kt)("li",{parentName:"ul"},"If the side effects change state (using ",(0,o.kt)("inlineCode",{parentName:"li"},"useState"),"), then this will trigger an infinite loop. How: ",(0,o.kt)("inlineCode",{parentName:"li"},"side-effect")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"li"},"change state")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"li"},"re-render due to change state")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"li"},"side-effect")," \ud83d\udd01 and so on.")),(0,o.kt)("p",null,"So how do we code side effects into components, in a controllable way. The answer is the ",(0,o.kt)("inlineCode",{parentName:"p"},"useEffect")," hook."),(0,o.kt)("h3",{id:"how"},"How"),(0,o.kt)("p",null,"Syntax of ",(0,o.kt)("inlineCode",{parentName:"p"},"useEffect"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},"import {useEffect} from 'react';\n\nconst MyComponent() {\n    ...\n    useEffect( () => {...}, [...]);\n    ...\n    return <>...</>;\n}\n")),(0,o.kt)("p",null,"It has two pieces:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Dependency array - just variables. React keeps track of these."),(0,o.kt)("li",{parentName:"ol"},"A function that runs ",(0,o.kt)("em",{parentName:"li"},"after")," every render if any dependencies have changed, including the first render (independent of dependency array). Side effect code goes into this function.")),(0,o.kt)("h6",{id:"note-on-dependency-array"},"Note on dependency array"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"If dependency = ",(0,o.kt)("inlineCode",{parentName:"li"},"undefined"),", i.e. absent. Function will run after every render."),(0,o.kt)("li",{parentName:"ol"},"If dependency = [] (empty array), the function will execute once, i.e. after first render."),(0,o.kt)("li",{parentName:"ol"},"If the dependency array has any candidates, the function will run after every render, given the dependencies have changed."),(0,o.kt)("li",{parentName:"ol"},"In-built functions, second element of ",(0,o.kt)("inlineCode",{parentName:"li"},"useState()")," array, or anything defined outside the component should not be passed as a dependency, because it has no effect. Basically, only pass stuff that is changed/can change inside the component function (or its parent).")),(0,o.kt)("h3",{id:"what"},"What"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," is the solution to the problem of placement (and therefore execution) of side-effect (s) code."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," is not like ",(0,o.kt)("inlineCode",{parentName:"li"},"useState"),". i.e. it won't trigger re-render due dependency array change. It will do so only if state is changed inside the function, which is not the question here. Again, to reiterate - ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," runs the function after every render if any dependency has changed."),(0,o.kt)("li",{parentName:"ul"},"Additionally, ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," may be used as a refactor to repeated code, due to presence of a dependency array."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," is good for times when a state is dependent on other states, given the dependent states are kept in the dependency array. This will lead to the latest state being considered during state updation (FIXME: latest, really?).")),(0,o.kt)("h6",{id:"when-to-use-useeffect"},"When to use ",(0,o.kt)("inlineCode",{parentName:"h6"},"useEffect"),"?"),(0,o.kt)("p",null,"FIXME - can be made better"),(0,o.kt)("p",null,"Use it when:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The task is a side-effect. Note that all possible side-effect code is a part of ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect"),", i.e. ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect")," is for side-effects, the converse may not be true."),(0,o.kt)("li",{parentName:"ol"},"It is computationally expensive and/or not needed on each render."),(0,o.kt)("li",{parentName:"ol"},"For http requests, DB/",(0,o.kt)("inlineCode",{parentName:"li"},"localStorage")," read/writes may use ",(0,o.kt)("inlineCode",{parentName:"li"},"useEffect"),"."),(0,o.kt)("li",{parentName:"ol"},"You'll know.")))}u.isMDXComponent=!0}}]);