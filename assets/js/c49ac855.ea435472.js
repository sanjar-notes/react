"use strict";(self.webpackChunkreactjs_notes_docu=self.webpackChunkreactjs_notes_docu||[]).push([[2839],{9613:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var o=r(9496);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,a=function(e,t){if(null==e)return{};var r,o,a={},n=Object.keys(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)r=n[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(r),h=a,m=p["".concat(c,".").concat(h)]||p[h]||d[h]||n;return r?o.createElement(m,i(i({ref:t},u),{},{components:r})):o.createElement(m,i({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,i=new Array(n);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<n;l++)i[l]=r[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}h.displayName="MDXCreateElement"},6661:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>n,metadata:()=>s,toc:()=>l});var o=r(1163),a=(r(9496),r(9613));const n={},i="313. Auto logout",s={unversionedId:"home/resource_itineraries/React_the_complete_guide/Adding_authentication_to_React_apps/Auto-logout",id:"home/resource_itineraries/React_the_complete_guide/Adding_authentication_to_React_apps/Auto-logout",title:"313. Auto logout",description:"Created Sunday 27 November 2022",source:"@site/docs/home/4_resource_itineraries/2_React_the_complete_guide/22_Adding_authentication_to_React_apps/313. Auto-logout.md",sourceDirName:"home/4_resource_itineraries/2_React_the_complete_guide/22_Adding_authentication_to_React_apps",slug:"/home/resource_itineraries/React_the_complete_guide/Adding_authentication_to_React_apps/Auto-logout",permalink:"/reactjs-notes/docs/home/resource_itineraries/React_the_complete_guide/Adding_authentication_to_React_apps/Auto-logout",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/home/4_resource_itineraries/2_React_the_complete_guide/22_Adding_authentication_to_React_apps/313. Auto-logout.md",tags:[],version:"current",sidebarPosition:313,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"312. Persisting login state",permalink:"/reactjs-notes/docs/home/resource_itineraries/React_the_complete_guide/Adding_authentication_to_React_apps/Persisting login state"},next:{title:"316. Intro to Next.js",permalink:"/reactjs-notes/docs/home/resource_itineraries/React_the_complete_guide/Intro_to_Next_js/Basic_Info/Module_introduction"}},c={},l=[{value:"Why",id:"why",level:2},{value:"How",id:"how",level:2}],u={toc:l},p="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"313-auto-logout"},"313. Auto logout"),(0,a.kt)("p",null,"Created Sunday 27 November 2022"),(0,a.kt)("h2",{id:"why"},"Why"),(0,a.kt)("p",null,"We need to log the user out:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Visits the app but token has already expired."),(0,a.kt)("li",{parentName:"ol"},"Token expires during app use.")),(0,a.kt)("h2",{id:"how"},"How"),(0,a.kt)("p",null,"The two cases:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Visits the app but token has already expired")," - We can check this when the app starts, and reset all auth related data, effectively logging them out. Of course, this will happen fast, so it will appear as if the user has never logged in, good."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"Token expires during app use")," - we need to create a timer (using ",(0,a.kt)("inlineCode",{parentName:"li"},"setTimeout"),"). Also, we need to take care that there's always just one auto logout timer at all times. For example - when the app starts(assume token has not expired), the timer is initialized. The user now logs out (manually) and logs back in, which will create a new timer. The old timer is till there, and will cause premature log out. This can be solved by saving the timer in a state (",(0,a.kt)("inlineCode",{parentName:"li"},"useState"),")  and clearing it when token renews, the user logs out. The very last timer, i.e. on app close (like tab closed/window closed) is killed with the tab/window being closed.")),(0,a.kt)("p",null,"See code - ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/exemplar-codes/react-auth-basic-practice/commit/8db81f06493c327e8ba94fd6145053187102ecf5"},"start")," to ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/exemplar-codes/react-auth-basic-practice/commit/b3a14b19b976a096166fad0ad705b953d565d0a7"},"finish"),"."))}d.isMDXComponent=!0}}]);